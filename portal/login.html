<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex items-center justify-center h-screen bg-gray-100">

<div class="bg-white p-6 rounded shadow w-80">
  <h2 class="text-xl font-bold mb-4">Login</h2>

  <input id="email" class="border w-full p-2 mb-2" placeholder="Email">
  <input id="password" type="password" class="border w-full p-2 mb-4" placeholder="Password">

  <button onclick="login()" class="bg-blue-600 text-white w-full py-2 rounded">
    Login
  </button>
</div>

<script type="module">
import { signInWithEmailAndPassword } from
"https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
import { auth } from "./firebase.js";
import { doc, getDoc } from
"https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";
import { db } from "./firebase.js";

window.login = async () => {
  const userCred = await signInWithEmailAndPassword(
    auth,
    email.value,
    password.value
  );

  const userDoc = await getDoc(doc(db,"teachers",userCred.user.uid));
  const role = userDoc.data().role;

  window.location.href = role === "admin" ? "admin.html" : "teacher.html";
};
</script>
</body>
</html>
